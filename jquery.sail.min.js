!function(e,$){function t(t,a){t=t||{},a=a||{},a.update=function(e,a,n){var r=$("<head />").html(e.replace(/([^]+<head[^>]*>|<\/head>[^]+)/g,""));history.pushState("",r.find("title").text(),n.requestedURL),t.callback&&"function"==typeof t.callback&&t.callback();var i=$(t.frame);i.trigger("pjaxUpdateContentBefore"),t.head&&t.head.length&&(i.trigger("pjaxUpdateHeadBefore"),$("head").find(t.head).remove(),r.find(t.head).appendTo("head"),i.trigger("pjaxUpdateHeadAfter"));var l=e.match(/<body(.*?)>/),o=$("body").removeAttr("id").removeAttr("class");if(l&&l.length&&l[1]){var c=$("<div "+l[1]+"></div>");$.each(["id","class"],function(e,t){var a=c.attr(t)||"";a&&a.length&&o.attr(t,a)})}o=$("<div />").html(e.replace(/([^]+<body[^>]*>|<\/body>[^]+)/g,"")),i.trigger("pjaxUpdateContentBefore"),$.each(t.area,function(e,t){var a=$.trim(t),n=$(a);n.length&&$(n[n.length-1]).html(o.find(a.split(",")[0]).html())}),i.trigger("pjaxUpdateContentAfter")},a.fetch=function(n){var r=this;r.href||(r.href=e.location.pathname);var i=!t.filter||t.filter&&t.filter.call(r,n);if(i){n.preventDefault(),n.stopPropagation(),$(r).trigger("click.pjax");var l=$(t.frame),o=t.ajax;o.url=this.href,o.processData=!1,o.beforeSend=function(e,t){e.requestedURL=o.url,l.trigger("pjaxAjaxBeforeSend")},o.complete=function(){l.trigger("pjaxAjaxComplete")},o.success=a.update,$.ajax(o)}},a.ajaxify=function(){$.fn.live?$(t.link).live("click",a.fetch):$.fn.on&&$(document).on("click",t.link,a.fetch)},a.ajaxify(),$(window).bind("popstate",a.fetch)}$.fn.sail=function(a){return this.length?this.each(function(){new t($.extend({area:[".article"],ajax:{timeout:5e3},callback:function(){e.ga&&e.ga("send","pageview",e.location.pathname+e.location.search)},filter:function(){var t=function(e){return e.split("#")[0].split("?")[0]};return function(a){var n=!0;return this&&this.href||(n=!1),t(this.href)===t(e.location.href)&&(n=!1),/(\.html|\.shtml|\.php|\.asp|\/)$/.test(t(this.href))||(n=!1),this.target&&!/self/.test(this.target)&&(n=!1),(a.which>1||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)&&(n=!1),this.hreflang&&document.documentElement&&document.documentElement.lang&&this.hreflang!==document.documentElement.lang&&(n=!1),n}}(),link:"a",head:["title","meta[name^='keyword']","meta[name^='description']","meta[property^='og']","meta[name^='twitter']","link[rel='canonical']","link[rel='prev']","link[rel='next']"].join(", "),frame:this||e},a||{}))}):this}}(window,jQuery);