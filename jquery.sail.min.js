/* @license MIT LICENSE https://github.com/grenouille220/jquery-sail/blob/master/LICENSE */
!function(e,$){function t(t,a){t=t||{},a=a||{};var r=0;t.head=function(e){for(var t=[],a,r=0,n=e.split(","),i=n.length;r<i;r++)a=n[r].replace(/^\s+|\s+$/g,""),"title"===a||/\[/.test(a)?t.push(a):(t.push("meta[name^='"+a+"']"),t.push("meta[property^='"+a+"']"),t.push("meta["+a+"]"),t.push("link[rel='"+a+"']"),t.push("link["+a+"]"));return t.join(",")}(t.head||""),a.notify=function(e){if($&&$.a11yfy)$.a11yfy.assertiveAnnounce(e);else{var t=$(".jquery-a11yfy-assertiveannouncer");if(!t||!t.length){var a=document.createElement("style"),n=".offscreen { border: 0; clip: rect(0 0 0 0); clip: rect(0, 0, 0, 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; width: 1px; position: absolute; }";a.setAttribute("type","text/css"),$("head").append(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n));for(var i=0;i<2;i++)$("body").append($("<div>").attr({id:"jquery-a11yfy-assertiveannouncer"+i,class:"jquery-a11yfy-assertiveannouncer",role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("offscreen"));t=$(".jquery-a11yfy-assertiveannouncer")}$(t[r]).empty(),r+=1,r%=2,$(t[r]).append($("<p>").text(document.title))}},a.setLazyloadView=function(t){e.Waypoint.destroyAll();var a;return t.find("img").each(function(){var e=$(this),t=e.attr("width")||20,a=e.attr("height")||15;e.attr("data-fullsize")||e.attr("data-fullsize",e.attr("src"));for(var r,n=["thumb","thumbnail","preload"],i=0,l=n.length;i<l;i++)if(r=e.attr("data-"+n[i])||!1,r&&r.length){e.removeAttr("data-"+n[i]);break}r||(r="data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' id%3D'jquerysail' width%3D'"+t+"' height%3D'"+a+"' viewBox%3D'0 0 "+t+" "+a+"'%2F%3E"),e.attr("src",r).wrap('<span class="jquery-sail-placeholder jquery-placeholder-image"></span>')}),t.find("iframe").each(function(){var e=$(this),t=e.attr("width")||20,r=e.attr("height")||15,n=e.attr("src");if(e.wrap('<span class="jquery-sail-placeholder jquery-placeholder-iframe"></span>'),a="data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' id%3D'jquerysail' width%3D'"+t+"' height%3D'"+r+"' viewBox%3D'0 0 "+t+" "+r+"'%2F%3E",/youtube/.test(n)){var i=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,l=n.match(i);l&&l.length&&l[1]&&(a="//img.youtube.com/vi/"+l[1]+"/0.jpg")}e.parent().append('<img src="'+a+'" width="'+t+'" height="'+r+'" alt="" data-fullsize="'+e.parent().html().replace(/"/g,"&quot;")+'" />'),e.remove()}),t},a.setLazyloadEvents=function(t){return t.find(".jquery-placeholder-iframe img").each(function(){$(this).parent().data("fullsize",$(this).attr("data-fullsize")),$(this).removeAttr("data-fullsize")}).waypoint({handler:function(){var t=200,a=this,r=a.element;setTimeout(function(){var t=$(r);t.replaceWith(t.parent().data("fullsize")),e.Waypoint.refreshAll()},t),a.destroy()},offset:"90%"}),t.find(".jquery-placeholder-image img").each(function(){$(this).data("fullsize",$(this).attr("data-fullsize")),$(this).removeAttr("data-fullsize")}).waypoint({handler:function(){var t=0,a=this,r=a.element;setTimeout(function(){var t=$(r),a=new Image;a.onload=function(){t.attr("src",this.src).addClass("loaded")},a.src=t.data("fullsize"),e.Waypoint.refreshAll()},t),a.destroy()},offset:"90%"}),t},a.update=function(r,n,i){var l=$("<head />").html(r.replace(/([^]+<head[^>]*>|<\/head>[^]+)/g,""));history.pushState("",l.find("title").text(),i.requestedURL);var o=$(t.frame);t.head&&t.head.length&&(o.trigger("pjaxUpdateHeadBefore"),$("head").find(t.head).remove(),l.find(t.head).appendTo("head"),o.trigger("pjaxUpdateHeadAfter"));var s=r.match(/<body(.*?)>/),d=$("body").removeAttr("id").removeAttr("class");if(s&&s.length&&s[1]){var c=$("<div "+s[1]+"></div>");$.each(["id","class"],function(e,t){var a=c.attr(t)||"";a&&a.length&&d.attr(t,a)})}var f=$("<div />").html(r.replace(/([^]+<body[^>]*>|<\/body>[^]+)/g,""));$.each(t.area,function(r,n){var i=$.trim(n),l=$(i),o;l.length&&(t.softReplace?(o=$(l[l.length-1]),o.parent().addClass("ui-state-pjax-before"),o.addClass("isOldBarba").css({position:"absolute",top:-1*$(window).scrollTop()+o.offset().top+"px"}).after(f.find(i.split(",")[0]).addClass("isNewBarba")),o.parent().addClass("ui-state-pjax-after")):t.pjaxUpdateContentBefore&&"function"==typeof t.pjaxUpdateContentBefore?$(l[l.length-1]).html(t.pjaxUpdateContentBefore(f.find(i.split(",")[0]),t.lazyload&&e.Waypoint?a.setLazyloadView:function(e){return e.html()})):$(l[l.length-1]).html(f.find(i.split(",")[0]).html()))}),$(window).scrollTop(0),$.each(t.area,function(r,n){var i=$.trim(n),l=$(i);l.length&&(t.softReplace||t.pjaxUpdateContentAfter&&"function"==typeof t.pjaxUpdateContentAfter&&t.pjaxUpdateContentAfter($(l[l.length-1]),t.lazyload&&e.Waypoint?a.setLazyloadEvents:function(e){return e}))}),t.callback&&"function"==typeof t.callback&&t.callback(),/title/.test(t.head||"")&&t.aria&&a.notify(document.title)},a.fetch=function(r){var n=this;n.href||(n.href=e.location.pathname);var i=!t.filter||t.filter&&t.filter.call(n,r);if(i){var l={url:n.href,container:$(n).attr("data-pjax"),target:n,push:!0,replace:!1,scrollTo:0,type:"GET",dataType:"html"},o=$.Event("pjax:click"),s=$.Event("sail:click");if($(n).trigger(o,[l]).trigger(s,[l]),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){r.preventDefault(),$(n).trigger("pjax:clicked",[l]).trigger("sail:clicked",[l]).trigger("linkClicked",[document.documentElement]);var d=$(t.frame),c=t.ajax;c.url=this.href,c.processData=!1,c.beforeSend=function(e,t){e.requestedURL=c.url,d.trigger("pjaxAjaxBeforeSend")},c.complete=function(){d.trigger("pjaxAjaxComplete")},c.success=a.update,$.ajax(c)}}},a.ajaxify=function(){$.fn.live?$(t.link).live("click",a.fetch):$.fn.on&&$(document).on("click",t.link,a.fetch)},a.ajaxify(),$(window).bind("popstate",a.fetch)}$.fn.sail=function(a){return this.length?this.each(function(){new t($.extend({area:["#sail"],aria:!0,ajax:{timeout:5e3},callback:function(){e.ga&&e.ga("send","pageview",e.location.pathname+e.location.search)},filter:function(){var t=function(e){return e.split("#")[0].split("?")[0]};return function(a){var r=!0;this&&this.href||(r=!1);var n=t(this.href);return n===t(e.location.href)&&(r=!1),/(\/|\.html|\.shtml|\.asp|\.php)$/.test(t(n))||(r=!1),this.target&&!/self/.test(this.target)&&(r=!1),(a.which>1||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)&&(r=!1),this.hreflang&&document.documentElement&&document.documentElement.lang&&this.hreflang!==document.documentElement.lang&&(r=!1),r}}(),link:"a",head:"title, keyword, description, og, twitter, itemprop, canonical, prev, next, alternate",frame:this||e,softReplace:0,lazyload:1,pjaxUpdateContentBefore:function(e,t){return t(e).html()},pjaxUpdateContentAfter:function(e,t){return t(e)}},a||{}))}):this}}(window,jQuery);