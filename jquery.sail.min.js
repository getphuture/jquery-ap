/* @license MIT LICENSE https://github.com/grenouille220/jquery-sail/blob/master/LICENSE */
!function(e,$){function t(t,a){t=t||{},a=a||{};var n=0;t.head=function(e){for(var t=[],a,n=0,r=e.split(","),i=r.length;n<i;n++)a=r[n].replace(/^\s+|\s+$/g,""),"title"===a||/\[/.test(a)?t.push(a):(t.push("meta[name^='"+a+"']"),t.push("meta[property^='"+a+"']"),t.push("meta["+a+"]"),t.push("link[rel='"+a+"']"),t.push("link["+a+"]"));return t.join(",")}(t.head||""),a.notify=function(e){if($&&$.a11yfy)$.a11yfy.assertiveAnnounce(e);else{var t=$(".jquery-a11yfy-assertiveannouncer");if(!t||!t.length){var a=document.createElement("style"),r=".offscreen { border: 0; clip: rect(0 0 0 0); clip: rect(0, 0, 0, 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; width: 1px; position: absolute; }";a.setAttribute("type","text/css"),$("head").append(a),a.styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r));for(var i=0;i<2;i++)$("body").append($("<div>").attr({id:"jquery-a11yfy-assertiveannouncer"+i,class:"jquery-a11yfy-assertiveannouncer",role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("offscreen"));t=$(".jquery-a11yfy-assertiveannouncer")}$(t[n]).empty(),n+=1,n%=2,$(t[n]).append($("<p>").text(document.title))}},a.setLazyloadView=function(t){e.Waypoint.destroyAll();var a;return t.find("img").each(function(){var e=$(this),t=e.attr("width")||20,a=e.attr("height")||15;e.attr("data-fullsize")||e.attr("data-fullsize",e.attr("src"));for(var n,r=["thumb","thumbnail","preload"],i=0,l=r.length;i<l;i++)if(n=e.attr("data-"+r[i])||!1,n&&n.length){e.removeAttr("data-"+r[i]);break}n||(n="data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' id%3D'jquerysail' width%3D'"+t+"' height%3D'"+a+"' viewBox%3D'0 0 "+t+" "+a+"'%2F%3E"),e.attr("src",n).wrap('<span class="jquery-sail-placeholder jquery-placeholder-image"></span>')}),t.find("iframe").each(function(){var e=$(this),t=e.attr("width")||20,n=e.attr("height")||15,r=e.attr("src");if(e.wrap('<span class="jquery-sail-placeholder jquery-placeholder-iframe"></span>'),a="data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' id%3D'jquerysail' width%3D'"+t+"' height%3D'"+n+"' viewBox%3D'0 0 "+t+" "+n+"'%2F%3E",/youtube/.test(r)){var i=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,l=r.match(i);l&&l.length&&l[1]&&(a="//img.youtube.com/vi/"+l[1]+"/0.jpg")}e.parent().append('<img src="'+a+'" width="'+t+'" height="'+n+'" alt="" data-fullsize="'+e.parent().html().replace(/"/g,"&quot;")+'" />'),e.remove()}),t},a.setLazyloadEvents=function(t){return t.find(".jquery-placeholder-iframe img").each(function(){$(this).parent().data("fullsize",$(this).attr("data-fullsize")),$(this).removeAttr("data-fullsize")}).waypoint({handler:function(){var t=200,a=this,n=a.element;setTimeout(function(){var t=$(n);t.replaceWith(t.parent().data("fullsize")),e.Waypoint.refreshAll()},t),a.destroy()},offset:"90%"}),t.find(".jquery-placeholder-image img").each(function(){$(this).data("fullsize",$(this).attr("data-fullsize")),$(this).removeAttr("data-fullsize")}).waypoint({handler:function(){var t=0,a=this,n=a.element;setTimeout(function(){var t=$(n),a=new Image;a.onload=function(){t.attr("src",this.src).addClass("loaded")},a.src=t.data("fullsize"),e.Waypoint.refreshAll()},t),a.destroy()},offset:"90%"}),t},a.update=function(n,r,i){var l=$("<head />").html(n.replace(/([^]+<head[^>]*>|<\/head>[^]+)/g,""));history.pushState("",l.find("title").text(),i.requestedURL);var o=$(t.frame);t.head&&t.head.length&&(o.trigger("pjaxUpdateHeadBefore"),$("head").find(t.head).remove(),l.find(t.head).appendTo("head"),o.trigger("pjaxUpdateHeadAfter"));var s=n.match(/<body(.*?)>/),d=$("body").removeAttr("id").removeAttr("class");if(s&&s.length&&s[1]){var f=$("<div "+s[1]+"></div>");$.each(["id","class"],function(e,t){var a=f.attr(t)||"";a&&a.length&&d.attr(t,a)})}var h=$("<div />").html(n.replace(/([^]+<body[^>]*>|<\/body>[^]+)/g,""));$.each(t.area,function(n,r){var i=$.trim(r),l=$(i),o;l.length&&(t.softReplace?(o=$(l[l.length-1]),o.parent().addClass("ui-state-pjax-before"),o.addClass("isOldBarba").css({position:"absolute",top:-1*$(window).scrollTop()+o.offset().top+"px"}).after(h.find(i.split(",")[0]).addClass("isNewBarba")),o.parent().addClass("ui-state-pjax-after")):t.pjaxUpdateContentBefore&&"function"==typeof t.pjaxUpdateContentBefore?$(l[l.length-1]).html(t.pjaxUpdateContentBefore(h.find(i.split(",")[0]),t.lazyload&&e.Waypoint?a.setLazyloadView:function(e){return e.html()})):$(l[l.length-1]).html(h.find(i.split(",")[0]).html()))}),$(window).scrollTop(0),$.each(t.area,function(n,r){var i=$.trim(r),l=$(i);l.length&&(t.softReplace||t.pjaxUpdateContentAfter&&"function"==typeof t.pjaxUpdateContentAfter&&t.pjaxUpdateContentAfter($(l[l.length-1]),t.lazyload&&e.Waypoint?a.setLazyloadEvents:function(e){return e}))}),t.callback&&"function"==typeof t.callback&&t.callback(),/title/.test(t.head||"")&&t.aria&&a.notify(document.title)},a.fetch=function(n){var r=this;r.href||(r.href=e.location.pathname);var i=!t.filter||t.filter&&t.filter.call(r,n);if(i){n.preventDefault(),n.stopPropagation(),$(r).trigger("click.pjax");var l=$(t.frame),o=t.ajax;o.url=this.href,o.processData=!1,o.beforeSend=function(e,t){e.requestedURL=o.url,l.trigger("pjaxAjaxBeforeSend")},o.complete=function(){l.trigger("pjaxAjaxComplete")},o.success=a.update,$.ajax(o)}},a.ajaxify=function(){$.fn.live?$(t.link).live("click",a.fetch):$.fn.on&&$(document).on("click",t.link,a.fetch)},a.ajaxify(),$(window).bind("popstate",a.fetch)}$.fn.sail=function(a){return this.length?this.each(function(){new t($.extend({area:["#sail"],aria:!0,ajax:{timeout:5e3},callback:function(){e.ga&&e.ga("send","pageview",e.location.pathname+e.location.search)},filter:function(){var t=function(e){return e.split("#")[0].split("?")[0]};return function(a){var n=!0;this&&this.href||(n=!1);var r=t(this.href);return r===t(e.location.href)&&(n=!1),/(\/|\.html|\.shtml|\.asp|\.php)$/.test(t(r))||(n=!1),this.target&&!/self/.test(this.target)&&(n=!1),(a.which>1||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)&&(n=!1),this.hreflang&&document.documentElement&&document.documentElement.lang&&this.hreflang!==document.documentElement.lang&&(n=!1),n}}(),link:"a",head:"title, keyword, description, og, twitter, itemprop, canonical, prev, next, alternate",frame:this||e,softReplace:0,lazyload:1,pjaxUpdateContentBefore:function(e,t){return t(e).html()},pjaxUpdateContentAfter:function(e,t){return t(e)}},a||{}))}):this}}(window,jQuery);