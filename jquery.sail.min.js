/* @license MIT LICENSE https://github.com/grenouille220/jquery-sail/blob/master/LICENSE */
!function(t,$){function e(e,a){e=e||{},a=a||{};var n=0;if(e.head=function(t){for(var e=[],a,n=0,r=t.split(","),i=r.length;n<i;n++)a=r[n].replace(/^\s+|\s+$/g,""),"title"===a||/\[/.test(a)?e.push(a):(e.push("meta[name^='"+a+"']"),e.push("meta[property^='"+a+"']"),e.push("meta["+a+"]"),e.push("link[rel='"+a+"']"),e.push("link["+a+"]"));return e.join(",")}(e.head||""),a.notify=function(t){if($&&$.a11yfy)$.a11yfy.assertiveAnnounce(t);else{var e=$(".jquery-a11yfy-assertiveannouncer");if(!e||!e.length){var a=document.createElement("style"),r=".offscreen { border: 0; clip: rect(0 0 0 0); clip: rect(0, 0, 0, 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; width: 1px; position: absolute; }";a.setAttribute("type","text/css"),$("head").append(a),a.styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r));for(var i=0;i<2;i++)$("body").append($("<div>").attr({id:"jquery-a11yfy-assertiveannouncer"+i,class:"jquery-a11yfy-assertiveannouncer",role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("offscreen"));e=$(".jquery-a11yfy-assertiveannouncer")}$(e[n]).empty(),n+=1,n%=2,$(e[n]).append($("<p>").text(document.title))}},e.lazyload){var r=document.createElement("div");r.className="offscreen",r.innerHTML=['<svg width="0" height="0" xmlns="http://www.w3.org/2000/svg">','<filter id="jquery-sail-blur">','<feGaussianBlur stdDeviation="5"></feGaussianBlur>',"</filter>","</svg>"].join(""),$("body").append(r)}a.setLazyloadView=function(e){return t.Waypoint.destroyAll(),e.find("img").each(function(){var t=$(this),e=t.attr("width")||20,a=t.attr("height")||15;t.attr("data-fullsize")||t.attr("data-fullsize",t.attr("src"));for(var n,r=["thumb","thumbnail","preload"],i=0,o=r.length;i<o;i++)if(n=t.attr("data-"+r[i])||!1,n&&n.length){t.removeAttr("data-"+r[i]);break}n||(n="data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg' id%3D'jquerysail' width%3D'"+e+"' height%3D'"+a+"' viewBox%3D'0 0 "+e+" "+a+"'%2F%3E"),t.attr("src",n)}),e},a.setLazyloadEvents=function(e){return e.find('img[src*="jquerysail"], img.jquery-sail-blur').each(function(){$(this).data("fullsize",$(this).attr("data-fullsize")),$(this).removeAttr("data-fullsize")}).waypoint({handler:function(){var e=0,a=this,n=a.element;setTimeout(function(){var e=$(n),a=new Image;a.onload=function(){e.attr("src",this.src)},a.src=e.data("fullsize"),t.Waypoint.refreshAll()},e),a.destroy()},offset:"90%"}),e},a.update=function(n,r,i){var o=$("<head />").html(n.replace(/([^]+<head[^>]*>|<\/head>[^]+)/g,""));history.pushState("",o.find("title").text(),i.requestedURL);var l=$(e.frame);e.head&&e.head.length&&(l.trigger("pjaxUpdateHeadBefore"),$("head").find(e.head).remove(),o.find(e.head).appendTo("head"),l.trigger("pjaxUpdateHeadAfter"));var s=n.match(/<body(.*?)>/),d=$("body").removeAttr("id").removeAttr("class");if(s&&s.length&&s[1]){var f=$("<div "+s[1]+"></div>");$.each(["id","class"],function(t,e){var a=f.attr(e)||"";a&&a.length&&d.attr(e,a)})}var c=$("<div />").html(n.replace(/([^]+<body[^>]*>|<\/body>[^]+)/g,""));$.each(e.area,function(n,r){var i=$.trim(r),o=$(i),l;o.length&&(e.softReplace?(l=$(o[o.length-1]),l.parent().addClass("ui-state-pjax-before"),l.addClass("isOldBarba").css({position:"absolute",top:-1*$(window).scrollTop()+l.offset().top+"px"}).after(c.find(i.split(",")[0]).addClass("isNewBarba")),l.parent().addClass("ui-state-pjax-after")):e.pjaxUpdateContentBefore&&"function"==typeof e.pjaxUpdateContentBefore?$(o[o.length-1]).html(e.pjaxUpdateContentBefore(c.find(i.split(",")[0]),e.lazyload&&t.Waypoint?a.setLazyloadView:function(t){return t.html()})):$(o[o.length-1]).html(c.find(i.split(",")[0]).html()))}),$(window).scrollTop(0),$.each(e.area,function(n,r){var i=$.trim(r),o=$(i);o.length&&(e.softReplace||e.pjaxUpdateContentAfter&&"function"==typeof e.pjaxUpdateContentAfter&&e.pjaxUpdateContentAfter($(o[o.length-1]),e.lazyload&&t.Waypoint?a.setLazyloadEvents:function(t){return t}))}),e.callback&&"function"==typeof e.callback&&e.callback(),/title/.test(e.head||"")&&e.aria&&a.notify(document.title)},a.fetch=function(n){var r=this;r.href||(r.href=t.location.pathname);var i=!e.filter||e.filter&&e.filter.call(r,n);if(i){n.preventDefault(),n.stopPropagation(),$(r).trigger("click.pjax");var o=$(e.frame),l=e.ajax;l.url=this.href,l.processData=!1,l.beforeSend=function(t,e){t.requestedURL=l.url,o.trigger("pjaxAjaxBeforeSend")},l.complete=function(){o.trigger("pjaxAjaxComplete")},l.success=a.update,$.ajax(l)}},a.ajaxify=function(){$.fn.live?$(e.link).live("click",a.fetch):$.fn.on&&$(document).on("click",e.link,a.fetch)},a.ajaxify(),$(window).bind("popstate",a.fetch)}$.fn.sail=function(a){return this.length?this.each(function(){new e($.extend({area:["#sail"],aria:!0,ajax:{timeout:5e3},callback:function(){t.ga&&t.ga("send","pageview",t.location.pathname+t.location.search)},filter:function(){var e=function(t){return t.split("#")[0].split("?")[0]};return function(a){var n=!0;this&&this.href||(n=!1);var r=e(this.href);return r===e(t.location.href)&&(n=!1),/(\/|\.html|\.shtml|\.asp|\.php)$/.test(e(r))||(n=!1),this.target&&!/self/.test(this.target)&&(n=!1),(a.which>1||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)&&(n=!1),this.hreflang&&document.documentElement&&document.documentElement.lang&&this.hreflang!==document.documentElement.lang&&(n=!1),n}}(),link:"a",head:"title, keyword, description, og, twitter, itemprop, canonical, prev, next, alternate",frame:this||t,softReplace:0,lazyload:1,pjaxUpdateContentBefore:function(t,e){return e(t).html()},pjaxUpdateContentAfter:function(t,e){return e(t)}},a||{}))}):this}}(window,jQuery);